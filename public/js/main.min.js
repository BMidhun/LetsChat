const chatForm=document.getElementById("chat-form"),chatScreen=document.querySelector(".chat-section-screen"),LeaveChat=document.querySelector("#leave"),RoomName=document.getElementById("room-name"),UserList=document.querySelector(".chat-users"),{username:username,rooms:rooms}=Qs.parse(location.search,{ignoreQueryPrefix:!0}),socket=io();socket.emit("joinRoom",{username:username,rooms:rooms}),socket.on("roomUsers",({room:e,users:s})=>{displayRoomUsers(e,s)}),socket.on("message",e=>{outputMessage(e),chatScreen.scrollTop=chatScreen.scrollHeight}),socket.emit("disconnect"),chatForm.addEventListener("submit",e=>{e.preventDefault();let s=e.target.elements.msg.value;s&&(socket.emit("chatMessage",s),e.target.elements.msg.value="")});const outputMessage=e=>{const s=document.createElement("div");s.classList.add("chat-box"),s.innerHTML=`<p>\n    <span class="text-user">${e.username}</span>\n    <span class="text-date">${e.time}</span>\n  </p>\n  <h4 class="message">${e.text}</h4>\n            `,chatScreen.appendChild(s)};function displayRoomUsers(e,s){RoomName.innerText=e;const t=s.map(e=>`<li><h3>${e.username}</h3></li>`).join("");UserList.innerHTML=`\n    ${t}\n  `}